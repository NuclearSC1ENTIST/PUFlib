#!/bin/bash
##############################################################
# PUFlib module list generator
# Description: generates a source file listing all modules
# compiled, given modules as arguments and source file on
# stdout.
#
# Author: Chris Pavlina
##############################################################

echo "// WARNING: this file is autogenerated by the build system. Do not edit!"
echo
echo "#include <puflib.h>"
echo

for modname in "$@"; do
    echo "extern module_info const ${modname}__MODULE_INFO;"
done
echo

echo "module_info const * const PUFLIB_MODULES[] = {"
for modname in "$@"; do
    echo "    &${modname}__MODULE_INFO,"
done
echo "    (module_info const *) 0,"
echo "};"
